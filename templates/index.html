<!DOCTYPE html>
<html>
<head>
    <title>To-Do App</title>
</head>
<body>
    <h1>To-Do App</h1>

    <input type="text" id="taskInput" placeholder="New task">
    <button onclick="addTask()">Add</button>

    <ul id="taskList"></ul>

    <script>
        // Backend URL on Render (update this after backend deploy)
        const backendUrl = "https://todo-backend.onrender.com";

        async function loadTasks() {
            let res = await fetch(backendUrl + "/tasks");
            let tasks = await res.json();
            let list = document.getElementById("taskList");
            list.innerHTML = "";
            if(tasks.length === 0){
                list.innerHTML = "<li>No tasks yet!</li>";
            }
            tasks.forEach(t => {
                let li = document.createElement("li");
                li.textContent = t.title + " ";
                let delBtn = document.createElement("button");
                delBtn.textContent = "Delete";
                delBtn.onclick = () => deleteTask(t.id);
                li.appendChild(delBtn);
                list.appendChild(li);
            });
        }

        async function addTask() {
            let task = document.getElementById("taskInput").value;
            if (!task) return;
            await fetch(backendUrl + "/tasks", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({title: task})
            });
            document.getElementById("taskInput").value = "";
            loadTasks();
        }

        async function deleteTask(id) {
            await fetch(backendUrl + "/tasks/" + id, { method: "DELETE" });
            loadTasks();
        }

        window.onload = loadTasks;
    </script>
</body>
</html>
